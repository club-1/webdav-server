<VirtualHost *:8080>
	Define path /home/nicolas/www/webdav-server
	ServerName webdav.club1.fr
	ServerAdmin n.peugnet@free.fr

	DocumentRoot ${path}

	<Location "/">
		AuthName "Compte CLUB1"
		AuthType Basic
		AuthBasicProvider ldap anon
		AuthLDAPUrl ldap://localhost/ou=People,dc=club1,dc=fr?uid
		Anonymous anonymous
		Anonymous_MustGiveEmail Off
		Require valid-user

		SetEnv pool %{env:AUTHENTICATE_UID}
		SetEnvIf AUTHENTICATE_UID "^" pool=www-data AUTHENTICATE_UID=anonymous
		SetHandler "proxy:unix:/run/php/php-fpm.%{env:pool}.sock|fcgi://localhost${path}/server.php"
	</Location>

	ErrorLog ${APACHE_LOG_DIR}/webdav_error.log
	CustomLog ${APACHE_LOG_DIR}/webdav_access.log combined

</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
