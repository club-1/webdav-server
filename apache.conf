<VirtualHost *:8080>
	ServerName webdav.club1.fr
	ServerAdmin n.peugnet@free.fr
	DocumentRoot /home/nicolas/www/webdav-server

	<Files "index.html">
		Require all granted
	</Files>

	<LocationMatch "^/(?<filename>files|calendars)">
		AuthName "Compte CLUB1"
		AuthType Basic
		AuthBasicProvider ldap
		AuthLDAPUrl ldap://localhost/ou=People,dc=club1,dc=fr?uid
		Require valid-user

		SetHandler "proxy:unix:/run/php/php-fpm.%{env:AUTHENTICATE_UID}.sock|fcgi://localhost/home/nicolas/www/webdav-server/%{env:MATCH_FILENAME}.php"
	</LocationMatch>

	ErrorLog ${APACHE_LOG_DIR}/webdav_error.log
	CustomLog ${APACHE_LOG_DIR}/webdav_access.log combined

</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
